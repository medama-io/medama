!function(){if(!document)return;const t=document.currentScript,e=t.getAttribute("data-api")?`${location.protocol}//${t.getAttribute("data-api")}/`:t.src.replace(/[^\/]+$/,"api/"),n=()=>Date.now().toString(36)+Math.random().toString(36).substr(2);let a=n(),o=!0,r=Date.now(),i=!1;const c=history.pushState,s=history.replaceState,d=()=>{o=!1,a=n(),r=Date.now(),i=!1},p=t=>function(e,n,a){a&&location.pathname!==new URL(a,location.href).pathname?(l(),d(),t.apply(this,arguments),u()):t.apply(this,arguments)},h=t=>new Promise((e=>{const n=new XMLHttpRequest;n.onload=()=>{e(0==n.responseText)},n.open("GET",t),n.setRequestHeader("Content-Type","text/plain"),n.send()})),u=async()=>{h(e+"event/ping?u="+encodeURIComponent(location.host+location.pathname)).then((t=>{fetch(e+"event/hit",{method:"POST",body:JSON.stringify({b:a,e:"load",u:location.href,r:document.referrer,p:o,q:t,t:Intl.DateTimeFormat().resolvedOptions().timeZone}),mode:"no-cors"})}))},l=()=>{i||navigator.sendBeacon(e+"event/hit",JSON.stringify({b:a,e:"unload",m:Date.now()-r})),i=!0},m=async t=>{Object.keys(t).length>0&&fetch(e+"event/hit",{method:"POST",body:JSON.stringify({b:a,e:"custom",g:location.hostname,d:t}),mode:"no-cors",keepalive:!0})},g=t=>{if(t.target instanceof HTMLElement&&t.target.hasAttribute("data-m:click")&&t.button<2){const e=(t.target.getAttribute("data-m:click")||"").split(";").reduce(((t,e)=>{const[n,a]=e.split("=").map((t=>t.trim()));return n&&a&&(t[n]=a),t}),{});m(e)}};addEventListener("click",g,{capture:!0}),addEventListener("auxclick",g,{capture:!0});const f=t=>{t.target instanceof HTMLAnchorElement&&t.target.href&&t.button<2&&new URL(t.target.href,location.href).hostname!==location.hostname&&m({outbound:t.target.href})};addEventListener("click",f,{capture:!0}),addEventListener("auxclick",f,{capture:!0}),"onpagehide"in self?addEventListener("pagehide",l,{capture:!0}):(addEventListener("beforeunload",l,{capture:!0}),addEventListener("unload",l,{capture:!0})),addEventListener("visibilitychange",(()=>{document.hidden&&l()}),{capture:!0}),h(e+"event/ping").then((e=>{o=e,u(),t.getAttribute("data-hash")?addEventListener("hashchange",u,{capture:!0}):(history.pushState=p(c),history.replaceState=p(s),addEventListener("popstate",(()=>{l(),d(),u()}),{capture:!0}))}))}();