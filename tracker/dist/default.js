function v(b){function f(a){return b.next(a)}function k(a){return b.throw(a)}return new Promise(function(a,h){function d(e){e.done?a(e.value):Promise.resolve(e.value).then(f,k).then(d,h)}d(b.next())})}
(function(){if(document){var b=document.currentScript,f=b.getAttribute("data-api")?`${document.location.protocol}//${b.getAttribute("data-api")}`:b.src.replace(/[^\/]+$/,"api/"),k=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),a=k(),h=!0,d=0,e=Date.now(),n=!1,w=history.pushState,x=history.replaceState,p=()=>{h=!1;a=k();d=0;e=Date.now();n=!1},t=c=>function(q,g,r){r&&location.pathname!==(new URL(r,location.href)).pathname?(l(),p(),c.apply(this,arguments),m()):c.apply(this,arguments)},
u=c=>new Promise(q=>{const g=new XMLHttpRequest;g.onload=()=>{q(0==g.responseText)};g.open("GET",c);g.setRequestHeader("Content-Type","text/plain");g.send()}),m=()=>v(function*(){u(f+"event/ping?u="+encodeURIComponent(location.host+location.pathname)).then(c=>{fetch(f+"event/hit",{method:"POST",body:JSON.stringify({b:a,e:"load",u:location.href,r:document.referrer,p:h,q:c,t:Intl.DateTimeFormat().resolvedOptions().timeZone}),mode:"no-cors"})})}()),l=()=>{n||navigator.sendBeacon(f+"event/hit",JSON.stringify({b:a,
e:"unload",m:Date.now()-e}));n=!0};"onpagehide"in self?document.addEventListener("pagehide",()=>{l()},{capture:!0}):(document.addEventListener("beforeunload",()=>{l()},{capture:!0}),document.addEventListener("unload",()=>{l()},{capture:!0}));document.addEventListener("visibilitychange",()=>{"hidden"==document.visibilityState?d=Date.now():(e+=Date.now()-d,d=0)},{capture:!0});u(f+"event/ping").then(c=>{h=c;m();b.getAttribute("data-hash")?document.addEventListener("hashchange",()=>{m()},{capture:!0}):
(history.pushState=t(w),history.replaceState=t(x),window.addEventListener("popstate",()=>{p();m()},{capture:!0}))})}})();
