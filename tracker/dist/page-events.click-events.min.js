!function(){if(!document)return;const t=document.currentScript,e=t.getAttribute("data-api")?`${location.protocol}//${t.getAttribute("data-api")}`:t.src.replace(/[^\/]+$/,"api/"),n=()=>Date.now().toString(36)+Math.random().toString(36).substr(2);let o=n(),a=!0,i=0,r=Date.now(),c=!1;const d=history.pushState,s=history.replaceState,l=()=>{a=!1,o=n(),i=0,r=Date.now(),c=!1},u=t=>function(e,n,o){o&&location.pathname!==new URL(o,location.href).pathname?(f(),l(),t.apply(this,arguments),m()):t.apply(this,arguments)},p=(t,e)=>(t.getAttribute(e)||"").split(";").reduce(((t,e)=>{const[n,o]=e.split("=").map((t=>t.trim()));return n&&o&&(t[n]=o),t}),{}),h=t=>new Promise((e=>{const n=new XMLHttpRequest;n.onload=()=>{e(0==n.responseText)},n.open("GET",t),n.setRequestHeader("Content-Type","text/plain"),n.send()})),m=async()=>{h(e+"event/ping?u="+encodeURIComponent(location.host+location.pathname)).then((t=>{let n={};for(const t of document.querySelectorAll("[data-m\\:load]"))n={...n,...p(t,"data-m:load")};fetch(e+"event/hit",{method:"POST",body:JSON.stringify({b:o,e:"load",u:location.href,r:document.referrer,p:a,q:t,t:Intl.DateTimeFormat().resolvedOptions().timeZone,d:n}),mode:"no-cors"})}))},f=()=>{if(!c){let t={};for(const e of document.querySelectorAll("[data-m\\:unload]"))t={...t,...p(e,"data-m:unload")};navigator.sendBeacon(e+"event/hit",JSON.stringify({b:o,e:"unload",m:Date.now()-r,d:t}))}c=!0},g=t=>{if(t.button>1||!(t.target instanceof HTMLElement))return;const n=p(t.target,"data-m:click");Object.keys(n).length>0&&fetch(e+"event/hit",{method:"POST",body:JSON.stringify({b:o,e:"custom",g:location.hostname,d:n}),mode:"no-cors"})};for(const t of document.querySelectorAll("[data-m\\:click]"))t.addEventListener("click",g),t.addEventListener("auxclick",g);"onpagehide"in self?addEventListener("pagehide",f,{capture:!0}):(addEventListener("beforeunload",f,{capture:!0}),addEventListener("unload",f,{capture:!0})),addEventListener("visibilitychange",(()=>{"hidden"==document.visibilityState?i=Date.now():(r+=Date.now()-i,i=0)}),{capture:!0}),h(e+"event/ping?root").then((e=>{a=e,m(),t.getAttribute("data-hash")?addEventListener("hashchange",m,{capture:!0}):(history.pushState=u(d),history.replaceState=u(s),addEventListener("popstate",(()=>{f(),l(),m()}),{capture:!0}))}))}();